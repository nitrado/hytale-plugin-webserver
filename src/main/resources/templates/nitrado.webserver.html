<html th:fragment="layout (title, content)" xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title th:replace="${title}"></title>
    <link th:href="@{/static/css/bootstrap.min.css}" href="../static/css/bootstrap.min.css" rel="stylesheet"/>
    <link th:href="@{/static/css/bootstrap-icons.min.css}" href="../static/css/bootstrap-icons.min.css" rel="stylesheet"/>
    <link th:href="@{/static/css/sidebar.css}" href="../static/css/sidebar.css" rel="stylesheet"/>
    <th:block th:replace="~{::#additionalCss} ?: _"></th:block>
</head>
<body>
    <main class="d-flex flex-nowrap">
        <div class="container-fluid p-5">
            <div class="row">
                <div class="col-sm-5 col-md-4 col-lg-3 gx-5 nitrado-webserver-sidebar">
                    <div class="d-flex flex-column p-3 text-bg-dark h-100  rounded-3">
                        <span th:if="${pluginGroups}" class="d-flex align-items-center">
                            <div class="fs-4">Web Plugins</div>
                        </span>
                        <ul class="nav nav-pills flex-column mb-auto mt-2">
                            <li th:each="group, groupStat : ${pluginGroups}" class="mb-1">
                                <button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed"
                                        data-bs-toggle="collapse"
                                        th:data-bs-target="'#group-collapse-' + ${groupStat.index}"
                                        aria-expanded="false">
                                    <span class="bi bi-chevron-right" th:text="' ' + ${group}"> Group</span>
                                </button>
                                <div class="collapse" th:id="'group-collapse-' + ${groupStat.index}">
                                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                        <li th:each="plugin : ${pluginsByGroups.get(group)}">
                                            <a th:href="@{|/${plugin.getGroup()}/${plugin.getName()}|}"
                                               class="link-body-emphasis d-inline-flex text-decoration-none rounded"
                                               th:text="${plugin.getName()}">PluginName</a>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                        </ul>
                        <hr>
                        <div class="dropdown">
                            <th:block th:if="${user.isAnonymous}">
                                <span th:text="${user.name}"></span>
                            </th:block>
                            <th:block th:unless="${user.isAnonymous}">
                                <a href="#" th:text="${user.name}" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" data-bs-toggle="dropdown"></a>
                                <span th:unless="${user.isAnonymous()}" style="max-width:100%; min-width: 0;" th:text="${user.uuid}" class="text-body-tertiary text-truncate d-inline-block"></span>
                                <ul class="dropdown-menu dropdown-menu-dark text-small shadow">
                                    <li><a class="dropdown-item" href="/logout">Log out</a></li>
                                </ul>
                            </th:block>
                            <hr>
                            <small class="text-body-tertiary d-block">
                                Nitrado:WebServer<br/>
                                <th:block th:text="${version}"></th:block>
                            </small>
                        </div>
                    </div>
                </div>
                <div th:insert="${content}" class="col-sm-7 col-md-8 col-lg-9 d-flex flex-column text-bg-dark p-5 rounded-3">
                </div>
            </div>
        </div>
    </main>
    <script th:src="@{/static/js/bootstrap.bundle.min.js}" src="../static/js/bootstrap.bundle.min.js" type="text/javascript"></script>
    <th:block th:replace="~{::#additionalJavascript} ?: _"></th:block>
</body>
</html>